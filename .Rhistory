runApp("CorrelationApp")
View(rawMonthlyReturns)
View(rawMonthlyReturns)
runApp("CorrelationApp")
as.Date(rawMonthlyReturns$date, "%Y-%m-%d")
as.Date(rawMonthlyReturns$date, "%Y-%m-%d")[1]
as.Date(rawMonthlyReturns$date, "%Y-%m-%d")[1]<as.Date("2014-01-01")
runApp("CorrelationApp")
startDate1 <- as.Date("2009-01-01", "%Y-%m-%d")
startDate1
max(which(as.Date(rawMonthlyReturns$date, "%Y-%m-%d")<startDate1))
min(which(as.Date(rawMonthlyReturns$date, "%Y-%m-%d")>startDate1))
runApp("CorrelationApp")
traceback()
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
rawMonthlyReturns <- read.cs("CorrelationApp/data/monthlyReturns.csv", stringsAsFactors = FALSE)
rawMonthlyReturns <- read.csv("CorrelationApp/data/monthlyReturns.csv", stringsAsFactors = FALSE)
max(which(as.Date(rawMonthlyReturns$date, "%Y-%m-%d")<startDate1))
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
as.Date("2009-01-01", "%Y-%m-%d")
as.Date("2009-01-01", "%Y-%mm-%d")
as.Date("2009-01-01", "%Y-%mm-%dd")
as.Date("2009-01-01", "%y-%m-%d")
as.Date("2009-01-01", "%Y-%m-%d")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
tickers <- read.csv("CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
which(tickers %in% selectedREITs)
selectedREITS <- c("ACC", "AEC")
which(tickers %in% selectedREITs)
selectedREITs <- c("ACC", "AEC")
which(tickers %in% selectedREITs)
which(tickers %in% selectedREITs)
which(tickers == selectedREITs)
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
selectedSeries0 <- rawMonthlyReturns[dateRange,selectedREITS+1]
selectedREITS <- which(tickers == input$selectedREITs)
selectedSeries0 <- rawMonthlyReturns[90:145, 2:5]
selectedSeries0
selectedSeries0+1
runApp("CorrelationApp")
selectedREITS <- which(tickers == c("ACC", "AHT", "AKR", "AMH"))
which(tickers == c("ACC", "AHT", "AKR", "AMH"))
which(tickers %in% c("ACC", "AHT", "AKR", "AMH"))
which(tickers == c("ACC", "AHT", "AKR", "AMH"))
which(tickers = c("ACC", "AHT", "AKR", "AMH"))
match(tickers, c("ACC", "AHT", "AKR", "AMH"))
rawMonthlyReturns <- read.csv("CorrelationApp/data/monthlyReturns.csv", stringsAsFactors = FALSE)
tickers <- read.csv("CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
which(tickers %in% c("ACC", "AHT", "AKR", "AMH"))
which(tickers == c("ACC", "AHT", "AKR", "AMH"))
match(tickers, c("ACC", "AHT", "AKR", "AMH"))
tickers
match(tickers$REITS, c("ACC", "AHT", "AKR", "AMH"))
which(tickers$REITS %in% c("ACC", "AHT", "AKR", "AMH"))
runApp("CorrelationApp")
selectedSeries0 <- rawMonthlyReturns[dateRange,selectedREITS+1]
runApp("CorrelationApp")
selectedSeries0 <- rawMonthlyReturns[108:174,selectedREITS+1]
selectedSeries0
selectedSeries0 <- rawMonthlyReturns[dateRange,selectedREITS+1]
selectedREITS <- which(tickers$REITS %in% c("ACC","AEC", "AHT", "AKR", "AMH"))
selectedREITS
selectedSeries0 <- rawMonthlyReturns[dateRange,selectedREITs+1]
selectedREITS <- which(tickers$REITS %in% c("ACC","AEC", "AHT", "AKR", "AMH"))
selectedREITs <- which(tickers$REITS %in% c("ACC","AEC", "AHT", "AKR", "AMH"))
selectedSeries0 <- rawMonthlyReturns[dateRange,selectedREITs+1]
selectedREITs
selectedREITs+1
selectedSeries0 <- rawMonthlyReturns[108:173,selectedREITs+1]
View(selectedSeries0)
selectedSeries1 <- as.zoo(cumprod(selectedSeries0+1))
View(selectedSeries1)
index(selectedSeries1) <- as.Date(rawMonthlyReturns$date[dateRange])
index(selectedSeries1) <- as.Date(rawMonthlyReturns$date[108:173])
selectedSeries1
View(selectedSeries1
)
runApp("CorrelationApp")
selectedSeries1
selectedSeries2
selectedSeries1
selectedSeries1[is.na(selectedSeries1)] <- 0
View(selectedSeries1)
selectedSeries1[is.na(selectedSeries1)] <- 0
View(selectedSeries1)
na.fill(selectedSeries1, fill=0)
is.zoo(selectedSeries1)
na.fill(selectedSeries1)
na.fill(selectedSeries1, fill = 0)
dim(selectedSeries1)
dim(selectedSeries1)
fill(selectedSeries1)
index(selectedSeries1)
na.fill(selectedSeries1, fill = 0)
is.na(selectedSeries1)
selectedSeries1[ is.na(selectedSeries1) ] <- 0
is.na(selectedSeries1)
selectedSeries1[ which(is.na(selectedSeries1)) ]<- 0
is.na(selectedSeries1)
return(selectedSeries1)
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
return(selectedSeries1)
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
dates <- rawMonthlyReturns$date[dateRange]
dateRange <- c(108:174)
dates <- rawMonthlyReturns$date[dateRange]
dates
dates <- as.Date(rawMonthlyReturns$date[dateRange])
dates
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
selectedSeries1
plot(selectedSeries1)
plot(selectedSeries1, screens = 1)
plot(selectedSeries1, xlab = "Time", ylab = "Cumulative Return", screens = 1, col = tsRainbow)
tsRainbow <- rainbow(ncol(selectedSeries1))
plot(selectedSeries1, xlab = "Time", ylab = "Cumulative Return", screens = 1, col = tsRainbow)
legend(x = "topleft", legend = tickers[selectedREITs], lty = 1,col = tsRainbow)
runApp("CorrelationApp")
plot(selectedSeries1, xlab = "Time", ylab = "Cumulative Return", screens = 1, col = tsRainbow)
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
selectedREITs <- which(tickers$REITS %in% input$selectedREITs)
selectedREITs <- which(tickers$REITS %in% selectedREITs)
selectedREITs
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
index <- read.csv("CorrelationApp/data/rwr.csv", stringsAsFactors = FALSE)
index
index
rwr <- read.csv("data/rwr.csv", stringsAsFactors = FALSE)
rwr <- read.csv("data/rwr.csv", stringsAsFactors = FALSE)
rwr <- read.csv("CorrelationApp/data/rwr.csv", stringsAsFactors = FALSE)
index
rwr
zoo(rwr)
zooI <- zoo(rwr)
plot(zooI$rwr)
zooI <- zoo(rwr)
zooI <- zoo(rwr$RWR)
plot(zooI$rwr)
zooI
runApp("CorrelationApp")
traceback()
tickers <- read.csv("data/tickers.csv", stringsAsFactors = FALSE)
tickers <- read.csv("data/tickers.csv", stringsAsFactors = FALSE)
tickers <- read.csv("CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
which(tickers$REITS %in% input$selectedREITs)
which(tickers$REITS %in% c("ACC"))
which(tickers$REITS %in% c("ACC", "AEC"))
which(tickers$REITS %in% c("ACC", "AEC", "CH{"))
which(tickers$REITS %in% c("ACC", "AEC", "CHP"))
which(tickers$REITS %in% c("ACC", "AEC", "AKR"))
plot(selectedSeries1)
plot(selectedSeries1, screens=1)
plot(selectedSeries1, screens=10)
plot(selectedSeries1, screens=7)
plot(selectedSeries1, screens=6)
plot(selectedSeries1, screens=5)
plot(selectedSeries1, screens=4)
plot(selectedSeries1, screens=3)
plot(selectedSeries1, screens=2)
plot(selectedSeries1, screens=1)
plot(selectedSeries1, screens=1)
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
which(tickers$REITS %in% c("CPT"))
which(tickers$REITS %in% c("CUBE"))
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
which(tickers$REITS %in% c("CUBE"))
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
which(tickers$REITS %in% c("CUBE"))
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
library(xtable)
runApp("CorrelationApp")
library(knitr)
library(knitr)
runApp("CorrelationApp")
cor(selectedSeries1)
is.character(cor(selectedSeries1))
is.numeric(cor(selectedSeries1))
is.numeric(cor(selectedSeries1))
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0
nrow(m0)
ncol(m0)
for(i in nrow(m0))
for(j in ncol(m0))
if(i<=j)
m0[i,j] <- NA
m0
for(i in nrow(m0))
for(j in ncol(m0))
if(i<=j)
m0[i,j] <- NA
m0
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
for(i in nrow(m0))
for(j in ncol(m0))
if(i<=j)
m0[i,j] <- NA
upper.tri(m0)
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[upper.tri(m0)] <- NA
m0
m0
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[upper.tri(m0, diag=TRUE)] <- NA
m0
?melt
library("reshape")
library("reshape2")
library(reshape2)
melt(m0)
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[upper.tri(m0, diag=TRUE)] <- NA
m1 <- melt(m0,varnames = c("R1", "R2", "Cor"))
m1 <- melt(m0,varnames = c("R1", "R2"), value.name = "Cor"))
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[upper.tri(m0, diag=TRUE)] <- NA
m1 <- melt(m0,varnames = c("R1", "R2"), value.name = "Cor")
m1
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[upper.tri(m0, diag=TRUE)] <- NA
m1 <- melt(m0,varnames = c("R1", "R2"), na.rm = TRUE, value.name = "Cor")
m1
order(m1$Cor)
m1[,order(m1$Cor)]
m1[order(m1$Cor),]
m1[-order(m1$Cor),]
m1[order(-m1$Cor),]
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[lower.tri(m0, diag=TRUE)] <- NA
m1 <- melt(m0,varnames = c("R1", "R2"), na.rm = TRUE, value.name = "Cor")
m1[order(-m1$Cor),]
m0 <- cor(selectedSeries0, y = NULL, use = "pairwise.complete.obs")
m0[lower.tri(m0, diag=TRUE)] <- NA
m1 <- melt(m0,varnames = c("V1", "V2"), na.rm = TRUE, value.name = "Cor")
m2 <- m1[order(-m1$Cor),]
return(m2)
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
runApp("CorrelationApp")
library(plyr)
library(quantmod)
endDate <- Sys.Date()
endDate <- Sys.Date()
startDate <- "2000-01-01"
reits <- read.csv("REITs.csv", stringsAsFactors = FALSE)
reits <- read.csv("tickers.csv", stringsAsFactors = FALSE)
getwd()
reits <- read.csv("/CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
reits <- read.csv("~/CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
getwd()
reits <- read.csv("CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
reits
reits <- reits$reits
reits
reits <- read.csv("CorrelationApp/data/tickers.csv", stringsAsFactors = FALSE)
reits <- reits$reits
reits
dfReturns <- data.frame()
for(j in 1:length(reits))
{
print(paste0("-Current REIT: ", tickers[j]))
# downloads prices
dailyPrices <- getSymbols(tickers[j], from = startDate, to = endDate, warnings = FALSE, auto.assign=FALSE)
# use this variable to strip only the Adjusted Closes from Yahoo Finance
# not relevant if using a different source, or if Yahoo changes their format
k = 6
dailyPrices <- dailyPrices[,k]
# for each stock, calculate monthly return and append it to the matrix.
monthlyReturns <- monthlyReturn(dailyPrices)
if(nrow(dfReturns)==0)
dfReturns <- data.frame("date" = index(monthlyReturns), "V2" = monthlyReturns)
else
{
df2 <- data.frame("date" = index(monthlyReturns), "V2" = monthlyReturns)
dfReturns <- merge(dfReturns, df2, by = "date", all = TRUE)
}
# fix names, and calculate descriptive statistics
colnames(dfReturns)[j+1] <- tickers[j]
#     descriptive[1:3,j] <- c(mean(monthlyReturns), sd(monthlyReturns), length(monthlyReturns))
}
for(j in 1:length(reits))
{
print(paste0("-Current REIT: ", reits[j]))
# downloads prices
dailyPrices <- getSymbols(reits[j], from = startDate, to = endDate, warnings = FALSE, auto.assign=FALSE)
# use this variable to strip only the Adjusted Closes from Yahoo Finance
# not relevant if using a different source, or if Yahoo changes their format
k = 6
dailyPrices <- dailyPrices[,k]
# for each stock, calculate monthly return and append it to the matrix.
monthlyReturns <- monthlyReturn(dailyPrices)
if(nrow(dfReturns)==0)
dfReturns <- data.frame("date" = index(monthlyReturns), "V2" = monthlyReturns)
else
{
df2 <- data.frame("date" = index(monthlyReturns), "V2" = monthlyReturns)
dfReturns <- merge(dfReturns, df2, by = "date", all = TRUE)
}
# fix names, and calculate descriptive statistics
colnames(dfReturns)[j+1] <- reits[j]
#     descriptive[1:3,j] <- c(mean(monthlyReturns), sd(monthlyReturns), length(monthlyReturns))
}
dfReturns
head(dfReturns)
getwd()
tickers <- read.csv("data/tickers.csv", stringsAsFactors = FALSE)
tickers <- read.csv("/data/tickers.csv", stringsAsFactors = FALSE)
getwd()
dir()
setwd("/CorrelationApp")
setwd("CorrelationApp")
tickers <- read.csv("data/tickers.csv", stringsAsFactors = FALSE)
?write.csv
write.csv(dfReturns, file=paste0("data/",filename))
fileName = "monthlyReturns.csv"
getwd()
write.csv(dfReturns, file="data/monthlyReturns.csv"))
write.csv(dfReturns, file="data/monthlyReturns.csv")
write.csv(dfReturns, file="data/monthlyReturns.csv", row.names = FALSE)
write.csv(dfReturns, file="data/monthlyReturns.csv", row.names = FALSE)
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
head(rawMonthlyReturns)
vnq <- rawMonthlyReturns[,1:2]
head(vnq)
rawMonthlyReturns <- rawMonthlyReturns[,-2]
head(rawMonthlyReturns)
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
dateRange <- [103,178]
dateRange <- seq(103,178)
dateRange
selectedREITs <- c("AEC","ACC")
selectedSeries0 <- rawMonthlyReturns[dateRange,c(2,selectedREITs+1)]
selectedREITs <- which(tickers$reits %in% selectedREITs)
selectedSeries0 <- rawMonthlyReturns[dateRange,c(2,selectedREITs+1)]
head(selectedSeries0)
selectedSeries0[,-1]
runApp("CorrelationApp")
getwd()
sedwd("..")
setwd("..")
getwd()
runApp("CorrelationApp")
runApp("CorrelationApp")
selectedSeries0
selectedSeries0<-selectedSeries0[1:174,]
selectedSeries9
selectedSeries0
dateRange<-seq(60:70)
selectedSeries0 <- rawMonthlyReturns[dateRange,c(2,selectedREITs+1)]
selectedSeries9
selectedSeries0
dateRange<-seq(160:170)
selectedSeries0 <- rawMonthlyReturns[dateRange,c(2,selectedREITs+1)]
selectedSeries0
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
setwd("CorrelationApp")
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
tickers <- read.csv("data/tickers.csv", stringsAsFactors = FALSE)
selectedSeries0 <- rawMonthlyReturns[dateRange,c(2,selectedREITs+1)]
selectedSeries0
dateRange
dateRange <- c(160:170)
dateRange
selectedSeries0 <- rawMonthlyReturns[dateRange,c(2,selectedREITs+1)]
selectedSeries0
selectedSeries1 <- zoo(selectedSeries0)
dates <- as.Date(rawMonthlyReturns$date[dateRange])
index(selectedSeries1) <- dates
selectedSeries1
selectedSeries1 <- selectedSeries0[,-1]
selectedSeries1
append("a", c("b", "c"))
selectedREITs
selectedREITs <- append("VNQ", selectedREITs)
selectedREITs
setwd()
getwd()
setwd("..")
getwd()
runApp("CorrelationApp")
runApp("CorrelationApp")
library(shinyapps)
library("shinyapps")
shinyapps::setAccountInfo(name='kevinmei', token='35D5D2F54E609BA0069FA019AE79F862', secret='/rZ649Xjf3Nju6hgyCuzpTU0PeVCQHwVZsPz+Mlu')
getwd()
deployApp()
setwd("CorrelationApp")
deployApp()
deployApp()
applications("kevinmei")
terminateApp("REIT", "kevinmei")
getwd()
getwd()
setwd("~/GitHub/reit")
deployApp(appName = "CorrelationApp", account = "kevinmei")
deployApp(appName = "CorrelationApp", account = "kevinmei")
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
as.zoo(rawMonthlyReturns)
as.zoo(rawMonthlyReturns)
library(zoo)
rawMonthlyReturns <- read.csv("data/monthlyReturns.csv", stringsAsFactors = FALSE)
library(zoo)
as.zoo(rawMonthlyReturns)
zmr<-as.zoo(rawMonthlyReturns)
head(zmr)
zmr[5,1:4]
zmr[1:5,1:4]
zmr[1:5,1:4]
is.na(zmr[1:5,1:4]()
)
is.na(zmr[1:5,1:4])
length(rawMonthlyReturns)
zooMonthly <- zoo(rawMonthlyReturns[,2:length(rawMonthlyReturns)])
zooMonthly[1:5,1:5]
dates <- as.Date(rawMonthlyReturns$date)
index(selectedSeries1) <- dates
index(zooMonthly) <- dates
zooMonthly[1:5,1:5]
getwd()
deployapp(appName = "CorrelationApp")
library(shinyapp)
library(shinyapps)
deployapp(appName = "CorrelationApp")
deployApp(appName = "CorrelationApp")
